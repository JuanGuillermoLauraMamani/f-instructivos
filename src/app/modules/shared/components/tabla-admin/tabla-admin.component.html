<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-item>
      <ion-title>Instructivos</ion-title>
    </ion-item>
  </ion-toolbar>
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col size="3"><ion-searchbar color="light" placeholder="Filtrar"></ion-searchbar></ion-col>
        <ion-col class="ion-padding">
          <ion-label>Instructivo</ion-label><ion-icon name="chevron-down-outline"></ion-icon>
        </ion-col>
        <ion-col class="ion-padding">
          <ion-label>Versión</ion-label><ion-icon name="chevron-down-outline"></ion-icon>
        </ion-col>
        <ion-col class="ion-padding">
          <ion-label>Vigencia</ion-label><ion-icon name="chevron-down-outline"></ion-icon>
        </ion-col>
        <ion-col class="ion-padding">
          <ion-label>Fecha Inicio</ion-label><ion-icon name="chevron-down-outline"></ion-icon>
        </ion-col>
        <ion-col class="ion-padding">
          <ion-label>Fecha Fin</ion-label><ion-icon name="chevron-down-outline"></ion-icon>
        </ion-col>
        <ion-col class="ion-padding">
          <ion-label>Tipo</ion-label><ion-icon name="chevron-down-outline"></ion-icon>
        </ion-col>
        <ion-col size="auto">
          <ion-button color="tertiary">
            <ion-icon slot="start" name="document"></ion-icon>
            Agregar
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>
<ion-grid class="tabla ion-padding">
  <ion-row>
    <ion-col class="headerTabla">ID</ion-col>
    <ion-col class="headerTabla">Nombre</ion-col>
    <ion-col class="headerTabla">Versión</ion-col>
    <ion-col class="headerTabla">Vigencia</ion-col>
    <ion-col class="headerTabla">Fecha Inicio</ion-col>
    <ion-col class="headerTabla">Fecha Fin</ion-col>
    <ion-col class="headerTabla">Tipo</ion-col>
    <ion-col class="headerTabla">PDF Original</ion-col>
    <ion-col class="headerTabla">PDF Escaneado</ion-col>
    <ion-col class="headerTabla">Tiempo</ion-col>
    <ion-col class="headerTabla">Acciones</ion-col>  
  </ion-row>
  <ion-row *ngFor="let inst of instructivos">
    <ion-col>{{ inst.id_instructivo }}</ion-col>
    <ion-col>{{ inst.nombre }}</ion-col>
    <ion-col>{{ inst.version }}</ion-col>
    <ion-col>
        <ion-badge color="{{inst.vigencia? 'success' : 'danger' }}">{{ inst.vigencia ? "Vigente" : "No vigente" }}</ion-badge>
    </ion-col>
    <ion-col>{{ inst.fecha_inicio }}</ion-col>
    <ion-col>{{ inst.vigencia !== true ? inst.fecha_fin : "-" }}</ion-col>
    <ion-col>-</ion-col>
    <ion-col>
      <ion-button size="small" (click)="open(inst, inst.ruta_pdf_original)">
        <ion-icon name="eye-outline" size="small"></ion-icon>
      </ion-button>
    </ion-col>
    <ion-col>
      <ion-button size="small" (click)="open(inst, inst.ruta_pdf_escaneado)">
        <ion-icon name="eye-outline" size="small"></ion-icon>
      </ion-button>
    </ion-col>
    <ion-col>
        <ion-icon name="timer-outline"></ion-icon>
        {{ restarFechas(inst.fecha_inicio) }}
    </ion-col>
    <ion-col>
      <ion-button fill="clear" color="dark" id="{{inst.id_instructivo}}" size="small">
        <ion-icon name="ellipsis-vertical-outline"></ion-icon>
      </ion-button>
      <ion-popover trigger="{{ inst.id_instructivo }}" [showBackdrop]="false">
        <ng-template>
          <ion-content>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
            <ion-list>
              <ion-item [button]="true" [detail]="false">
                <ion-button fill="clear" color="dark" (click) = "openInstructivo(inst)">Editar instructivo</ion-button> 
              </ion-item>
              <ion-item [button]="true" [detail]="false">
                <ion-button fill="clear" color="dark" (click) = "openInstructivo(inst)">Anular instructivo</ion-button> 
              </ion-item>    
            </ion-list>
          </ion-content>
        </ng-template>
      </ion-popover>
    </ion-col>
  </ion-row>
</ion-grid>